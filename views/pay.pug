html
  head
    title= title
    script(type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js")
    script(type="text/javascript" src="https://brainblocks.io/brainblocks.min.js")
    script(type="text/javascript").
      var CURRENCY = "#{currency}"
    script(type="text/javascript" src="/pay.js")
    link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous")

    style(type='text/css').
      .loading {
        text-align: center;
      }
      .loading-spinner {
        margin: 10px 0;
        width: 100px;
        height: 100px;
      }

      .page-container {
        width: 342px;
        margin: 0 auto;
      }

      .btn-cancel {
        font-size: 10px;
        padding: 0.25em 0.5em;
        margin: 0 -12px 0 0;
        border-color: #ccc;
      }

      .progress {
        height: 22px;
      }

      .progress-bar {
        text-align: left;
        padding-left: 1em;
      }

      h1 {
        font-size: 28px;
      }
  body
    .page-container.mt-2
      include partials/header.pug
      .progress.mb-2
        .progress-bar(style="width: 33%") Step 1/3

      .alert.alert-danger.mb-2(role="errors" style="display: none;")

      .card.step-1.step
        .card-header Enter Total Cart Amount
        .card-body
          form
            input(type="hidden" value=destination id="destination")
            .form-group
              .form-label Total Cart Amount
              .input-group
                .input-group-prepend
                  .input-group-text= symbol
                input.form-control(name="value" type="number" id="amount" placeholder="" step="0.01")
                .input-group-append
                  .input-group-text= currency.toUpperCase()
              small.help-text Don't forget taxes and shipping.

            .form-group
              button.btn.btn-primary(type="submit") Next Step

      .card.step-2.step(style="display: none;")
        .card-header
          button.btn-cancel.float-right.btn.btn-outline-secondary(type="button") X
          | Pay
          |
          strong
            = symbol
            |
            span(role="amount")
            | 
            = currency.toUpperCase()
          |
          | With Nano
        .card-body

          #brainblocks-container

      .card.step-3.step(style="display: none;")
        .card-header Copy Discount Code
        .card-body
           #discount-code-container
            .loading
              img.loading-spinner(src="data:image/svg+xml;base64,PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIyNXB4IiBoZWlnaHQ9IjI1cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cGF0aCBkPSJNNzguNzUgMTYuMThWMS41NmE2NC4xIDY0LjEgMCAwIDEgNDcuNyA0Ny43SDExMS44YTQ5Ljk4IDQ5Ljk4IDAgMCAwLTMzLjA3LTMzLjA4ek0xNi40MyA0OS4yNUgxLjhhNjQuMSA2NC4xIDAgMCAxIDQ3LjctNDcuN1YxNi4yYTQ5Ljk4IDQ5Ljk4IDAgMCAwLTMzLjA3IDMzLjA3em0zMy4wNyA2Mi4zMnYxNC42MkE2NC4xIDY0LjEgMCAwIDEgMS44IDc4LjVoMTQuNjNhNDkuOTggNDkuOTggMCAwIDAgMzMuMDcgMzMuMDd6bTYyLjMyLTMzLjA3aDE0LjYyYTY0LjEgNjQuMSAwIDAgMS00Ny43IDQ3Ljd2LTE0LjYzYTQ5Ljk4IDQ5Ljk4IDAgMCAwIDMzLjA4LTMzLjA3eiIgZmlsbD0iIzgxY2RmMSIgZmlsbC1vcGFjaXR5PSIxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209Ii05MCA2NCA2NCIgdG89IjAgNjQgNjQiIGR1cj0iNDAwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==")
            .loaded(style="display: none")
              .alert.alert-success(style="display: none;")
                strong Copied!
                |
                | Go back to the checkout.
              .form-group
                input.form-control(id="discount-code" type="text")

              .form-group
                button.btn.btn-primary(type="button" id="copy-code") Copy Code

                small.ml-1.form-help
                 | and use it for
                 | 
                 strong
                  = symbol
                  |
                  span(role="amount")
                  | 
                  = currency.toUpperCase()
                | 
                | off


      include partials/footer.pug
